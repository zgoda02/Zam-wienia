<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>System Zam√≥wie≈Ñ</title>
  <style>
    body { font-family: Arial, sans-serif; background: #1e293b; color: white; margin:0; }
    .login-screen { display:flex; justify-content:center; align-items:center; height:100vh; }
    .login-card { background:#2d3748; padding:2rem; border-radius:1rem; text-align:center; }
    .login-btn { padding:1rem; margin:0.5rem; border:none; border-radius:0.5rem; cursor:pointer; font-size:1rem; }
    .guest-btn { background:#22c55e44; color:#22c55e; }
    .admin-btn { background:#a855f744; color:#a855f7; }
    .main-app { display:none; padding:1rem; }
    .header { display:flex; justify-content:space-between; align-items:center; }
    .user-badge { background:#f9731622; padding:0.25rem 0.75rem; border-radius:0.5rem; }
    .logout-btn { background:#ef444422; border:none; padding:0.5rem 1rem; border-radius:0.5rem; color:#ef4444; cursor:pointer; }
    .category { margin-top:2rem; }
    .category h2 { color:#c4b5fd; border-bottom:1px solid #c4b5fd44; }
    .item { background:#ffffff11; padding:1rem; border-radius:0.5rem; margin:0.5rem 0; display:flex; justify-content:space-between; align-items:center; }
    .controls button { width:2rem; height:2rem; border:none; border-radius:0.5rem; font-size:1rem; cursor:pointer; }
    .minus { background:#ef444422; color:#ef4444; }
    .plus { background:#22c55e33; color:#22c55e; }
    .summary { margin-top:2rem; font-weight:bold; font-size:1.2rem; }
    select { padding:0.25rem; border-radius:0.5rem; }
  </style>
</head>
<body>
  <!-- Ekran logowania -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <h2>üîê System Zam√≥wie≈Ñ</h2>
      <button class="login-btn guest-btn" onclick="login('guest')">üë§ Zaloguj jako Go≈õƒá</button>
      <button class="login-btn admin-btn" onclick="login('admin')">‚öôÔ∏è Panel Administratora</button>
    </div>
  </div>

  <!-- Aplikacja -->
  <div class="main-app" id="mainApp">
    <div class="header">
      <h1>üßÆ System Zam√≥wie≈Ñ</h1>
      <div>
        <span class="user-badge" id="userBadge">Go≈õƒá</span>
        <button class="logout-btn" onclick="logout()">Wyloguj</button>
      </div>
    </div>

    <div style="margin:1rem 0;">
      <label for="memberSelect">Rodzaj u≈ºytkownika: </label>
      <select id="memberSelect" onchange="updateView()">
        <option value="H">Cz≈Çonek (H)</option>
        <option value="S">Supporter (S)</option>
      </select>
    </div>

    <!-- Kategorie -->
    <div class="category">
      <h2>üî´ Klamoty</h2>
      <div id="klamoty"></div>
    </div>

    <div class="category">
      <h2>üõ°Ô∏è Dodatki</h2>
      <div id="dodatki"></div>
    </div>

    <div class="category">
      <h2>üîπ Ammo</h2>
      <div id="ammo"></div>
    </div>

    <!-- Podsumowanie -->
    <div class="summary">
      Przedmioty: <span id="totalCount">0</span> |
      Suma: <span id="totalPrice">0$</span>
    </div>
  </div>

  <script>
    let currentUser = null;
    let currentTier = "H"; // H = cz≈Çonek, S = supporter
    let cart = {};

    const itemsData = {
      klamoty: {
        vintek: { name: "Vintek", prices: { S: 270000, H: 300000 } },
        pistol: { name: "Pistolet", prices: { S: 50000, H: 75000 } }
      },
      dodatki: {
        kajdanki: { name: "Kajdanki", prices: { S: 125000, H: 150000 } },
        kamizelka: { name: "Kamizelka", prices: { S: 200000, H: 250000 } }
      },
      ammo: {
        ammo9mm: { name: "Ammo 9mm", prices: { S: 1250, H: 1500 }, unit: "szt." }
      }
    };

    function login(type) {
      currentUser = type;
      document.getElementById("loginScreen").style.display = "none";
      document.getElementById("mainApp").style.display = "block";
      document.getElementById("userBadge").textContent = type === "admin" ? "Administrator" : "Go≈õƒá";
      initCart();
      renderItems();
      updateSummary();
    }

    function logout() {
      currentUser = null;
      document.getElementById("loginScreen").style.display = "flex";
      document.getElementById("mainApp").style.display = "none";
    }

    function initCart() {
      cart = {};
      for (let cat in itemsData) {
        for (let key in itemsData[cat]) {
          cart[key] = 0;
        }
      }
    }

    function renderItems() {
      for (let cat in itemsData) {
        const container = document.getElementById(cat);
        container.innerHTML = "";
        for (let key in itemsData[cat]) {
          const item = itemsData[cat][key];
          const div = document.createElement("div");
          div.className = "item";
          div.innerHTML = `
            <span>${item.name} - ${formatPrice(item.prices[currentTier])}${item.unit ? "/" + item.unit : ""}</span>
            <div class="controls">
              <button class="minus" onclick="updateCart('${key}', -1)">-</button>
              <span id="${key}">${cart[key]}</span>
              <button class="plus" onclick="updateCart('${key}', 1)">+</button>
            </div>
          `;
          container.appendChild(div);
        }
      }
    }

    function updateCart(key, delta) {
      cart[key] = Math.max(0, cart[key] + delta);
      document.getElementById(key).textContent = cart[key];
      updateSummary();
    }

    function updateSummary() {
      let totalCount = 0;
      let totalPrice = 0;
      for (let cat in itemsData) {
        for (let key in itemsData[cat]) {
          const qty = cart[key];
          totalCount += qty;
          totalPrice += qty * itemsData[cat][key].prices[currentTier];
        }
      }
      document.getElementById("totalCount").textContent = totalCount;
      document.getElementById("totalPrice").textContent = formatPrice(totalPrice);
    }

    function updateView() {
      currentTier = document.getElementById("memberSelect").value;
      renderItems();
      updateSummary();
    }

    function formatPrice(price) {
      if (price >= 1000000) return (price / 1000000).toFixed(1) + "M$";
      if (price >= 1000) return (price / 1000).toFixed(0) + "k$";
      return price + "$";
    }
  </script>
</body>
</html>
